timestamp: 2025-04-12T20:45:30Z # Updated timestamp
components:
  #BABEL_PLUGIN: &{
    name: InjectComponentIdPlugin,
    ^critical,
    parameters: [
      file: string,
      ast: BabelAST
    ],
    >injects: [data-component attribute],
    pattern: BabelVisitor,
    tests: [
      {scenario: "Function component", result: "Injects attribute"},
      {scenario: "Class component", result: "Injects attribute"},
      {scenario: "HOC/Fragment", result: "Skips or handles correctly"}
    ]
  }

  #EXT_CONTENT: &{
    name: ContentScript,
    ^critical,
    parameters: [
      message: HighlightCommand
    ],
    >calls: [#EXT_OVERLAY.highlightComponent],
    pattern: DOMScanner,
    tests: [
      {scenario: "Receives highlight command", result: "Queries DOM and calls overlay"}
    ]
  }

  #EXT_OVERLAY: &{
    name: OverlayRenderer,
    parameters: [
      componentName: string,
      nodes: NodeList
    ],
    >renders: [HighlightBox],
    pattern: OverlayBox,
    tests: [
      {scenario: "Multiple nodes", result: "Draws overlays for all"},
      {scenario: "No nodes", result: "No overlays"}
    ]
  }

  #VSC_EXT: &{
    name: VSCodeExtension,
    ^critical,
    parameters: [
      selection: string
    ],
    >calls: [#VSC_CLIENT.sendHighlightCommand], # Note: #VSC_CLIENT is in services index
    pattern: VSCodeCommand,
    tests: [
      {scenario: "Right-click command", result: "Extracts component name and sends"}
    ]
  }

  #EX_APP: &{ # Added entry
    name: App,
    parameters: [],
    >uses: [#EX_HEADER, #EX_FOOTER, #EX_HOME, #EX_PROFILE], # Based on typical App structure
    pattern: RootComponent,
    tests: []
  }

  #EX_MAIN: &{ # Added entry
    name: Main,
    parameters: [],
    >renders: [#EX_APP],
    pattern: EntryPoint,
    tests: []
  }

  #EX_BTN: &{
    name: Button,
    parameters: [
      children: ReactNode,
      onClick: () => void,
      variant: 'primary' | 'secondary'
    ],
    >usedBy: [#EX_HEADER, #EX_HOME, #EX_PROFILE, #EX_CARD],
    pattern: Component,
    tests: [
      {scenario: "Multiple instances", result: "All highlighted"}
    ]
  }

  #EX_AVATAR: &{
    name: Avatar,
    parameters: [
      src: string,
      alt: string,
      size: 'sm' | 'md' | 'lg'
    ],
    >usedBy: [#EX_HEADER, #EX_PROFILE, #EX_CARD],
    pattern: Component,
    tests: [
      {scenario: "Dynamic size", result: "Correct attribute injected"}
    ]
  }

  #EX_CARD: &{
    name: Card,
    parameters: [
      children: ReactNode,
      title: string
    ],
    >usedBy: [#EX_HOME, #EX_PROFILE],
    pattern: Component
  }

  #EX_HEADER: &{
    name: Header,
    parameters: [],
    >uses: [#EX_AVATAR, #EX_BTN],
    pattern: Component
  }

  #EX_FOOTER: &{
    name: Footer,
    parameters: [],
    pattern: Component
  }

  #EX_HOME: &{
    name: HomePage,
    parameters: [],
    >uses: [#EX_HEADER, #EX_CARD, #EX_BTN, #EX_FOOTER],
    pattern: Page
  }

  #EX_PROFILE: &{
    name: ProfilePage,
    parameters: [],
    >uses: [#EX_HEADER, #EX_AVATAR, #EX_CARD, #EX_FOOTER],
    pattern: Page
  }
